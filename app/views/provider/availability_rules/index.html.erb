<h1 class="h4 mb-4">
  Disponibilités récurrentes pour <%= @service.name %>
</h1>

<div class="mb-3">
  <%= link_to "➕ Ajouter une règle",
      new_provider_service_availability_rule_path(@service),
      class: "btn btn-primary" %>

  <%= link_to "← Retour au service",
      edit_provider_service_path(@service),
      class: "btn btn-link" %>
</div>

<% if @rules.empty? %>
  <div class="alert alert-info">
    Aucune règle définie. Ce service n’a actuellement aucune disponibilité récurrente.
  </div>
<% else %>

  <table class="table table-bordered align-middle">
    <thead>
      <tr>
        <th>Jour</th>
        <th>Début</th>
        <th>Fin</th>
        <th style="width: 150px;"></th>
      </tr>
    </thead>
    <tbody>
      <% @rules.each do |rule| %>
        <tr>
          <td><%= Date::DAYNAMES[rule.weekday] %></td>
          <td><%= rule.start_time.strftime("%H:%M") %></td>
          <td><%= rule.end_time.strftime("%H:%M") %></td>
          <td class="text-end">
            <%= link_to "Supprimer",
                provider_service_availability_rule_path(@service, rule),
                data: { turbo_method: :delete, turbo_confirm: "Supprimer cette règle ?" },
                class: "btn btn-sm btn-danger" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

<% end %>
