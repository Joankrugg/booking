<h2 class="mb-4">Exceptions (indisponibilités) — <%= @service.name %></h2>

<%= link_to "➕ Ajouter une exception",
    new_provider_service_availability_exception_path(@service),
    class: "btn btn-warning mb-3" %>

<table class="table table-bordered table-striped">
  <thead>
    <tr>
      <th>Date</th>
      <th>Début</th>
      <th>Fin</th>
      <th style="width: 180px"></th>
    </tr>
  </thead>

  <tbody>
    <% @exceptions.each do |ex| %>
      <tr>
        <td><%= ex.date.strftime("%d/%m/%Y") %></td>
        <td><%= ex.start_time&.strftime("%H:%M") || "Toute la journée" %></td>
        <td><%= ex.end_time&.strftime("%H:%M") || "—" %></td>

        <td>
          <%= link_to "Modifier",
              edit_provider_service_availability_exception_path(@service, ex),
              class: "btn btn-sm btn-secondary me-2" %>

          <%= link_to "Supprimer",
              provider_service_availability_exception_path(@service, ex),
              data: { turbo_method: :delete, turbo_confirm: "Supprimer cette exception ?" },
              class: "btn btn-sm btn-danger" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to "← Retour au service", provider_services_path, class: "btn btn-link" %>
