<h1 class="h4 mb-4">
  Exceptions pour <%= @service.name %>
</h1>

<div class="mb-3">
  <%= link_to "➕ Ajouter une exception",
      new_provider_service_availability_exception_path(@service),
      class: "btn btn-primary" %>

  <%= link_to "← Retour au service",
      edit_provider_service_path(@service),
      class: "btn btn-link" %>
</div>

<% if @exceptions.empty? %>
  <div class="alert alert-info">
    Aucune exception définie pour ce service.
  </div>
<% else %>
  <table class="table table-bordered align-middle">
    <thead>
      <tr>
        <th>Date</th>
        <th>Début</th>
        <th>Fin</th>
        <th style="width: 150px;"></th>
      </tr>
    </thead>
    <tbody>
      <% @exceptions.each do |exc| %>
        <tr>
          <td><%= exc.date.strftime("%d %B %Y") %></td>
          <td><%= exc.start_time&.strftime("%H:%M") || "—" %></td>
          <td><%= exc.end_time&.strftime("%H:%M") || "—" %></td>
          <td class="text-end">
            <%= link_to "Supprimer",
                provider_service_availability_exception_path(@service, exc),
                data: { turbo_method: :delete, turbo_confirm: "Supprimer cette exception ?" },
                class: "btn btn-sm btn-danger" %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>
